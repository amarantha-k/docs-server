= Function: Basic bucket Ops
:page-edition: Enterprise Edition
:tabs:

*Goal*: Perform the basic bucket operations where Eventing interacts with the Data service..

* This function *basicBucketOps* merely demonstrates basic Evening BucketOps.
* Requires a metdata bucket, a source bucket, and a bucket called "destination"
* Needs a Binding of type Bucket Alias (as documented in the Scriptlet).
* Will operate on any mutation of the KEY "basic_bkt_ops::1".
* The final document is delete, so we are interest in the Application log file.
* For more detail refer to xref:eventing:eventing-language-constructs.html#bucket_accessors[Bucket Accessors]

[{tabs}] 
====
basicBucketOps::
+
--
[source,javascript]
----
// To run need a Binding in this Function's Settings to apublic API as follows:
// 1. Bucket Alias
// 2. dst_buckt
// 3. destination
function OnUpdate(doc, meta) {
  // filter out non-interesting docs
  if (doc.type !== "basic_bkt_ops") return;
  // Assuming 'dst_bkt' is a bucket alias binding in this case to a non source bucket
  log("OnUpdate got mutation for id",meta.id,"doc",doc);
  
  // this is a bucket SET operation.
  dst_bkt["dst_" + meta.id] = {"status":3, "mutation": doc};    
  log('wrote {"status":3} to dst_bkt with id","dst_" + meta.id);
  
  // this is a bucket GET operation.
  var val = dst_bkt["dst_" + meta.id];                         
  log('read "+val+" from dst_bkt with id","dst_" + meta.id);
  
  // this is a bucket DEL operation.
  delete dst_bkt["dst_" + meta.id];            
  log('deleted id from dst_bkt with id","dst_" + meta.id);
}
----
--

Input Data/Mutation::
+
--
[source,json]
----
INPUT: KEY basicBucketOps::1

{
  "test": true
}

----
--

Output Data/Logged::
+ 
-- 
[source,json]
----
TBD
----
--
====
